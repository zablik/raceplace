<?php

namespace App\DataFixtures;

use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Bundle\FixturesBundle\FixtureGroupInterface;
use Doctrine\Common\DataFixtures\DependentFixtureInterface;
use Doctrine\ORM\EntityManagerInterface;
use Doctrine\Persistence\ObjectManager;
use Symfony\Component\Serializer\SerializerInterface;

class RaceResultsFixtures extends Fixture implements DependentFixtureInterface, FixtureGroupInterface
{
    private SerializerInterface $serializer;
    private EntityManagerInterface $em;

    public function __construct(
        SerializerInterface $serializer,
        EntityManagerInterface $em
    ) {
        $this->serializer = $serializer;
        $this->em = $em;
    }

    public function getDependencies()
    {
        return [
            EventRaceFixtures::class,
            ProfilesFixtures::class,
        ];
    }

    public function load(ObjectManager $manager)
    {
        $sql = $this->getSql();
        $stmt = $this->em->getConnection()->prepare($sql);
        $stmt->execute();
    }

    public static function getGroups(): array
    {
        return ['checkpoints'];
    }

    private function getSql()
    {
        return <<< SQL
INSERT INTO `profile_result` (`id`, `race_id`, `profile_id`, `time`, `place`, `disqualification`, `number_plate`, `note`) VALUES
(1, 1, 1, '02:25:35', 1, '', '2330', ''),
(2, 1, 2, '02:47:15', 2, '', '2132', ''),
(3, 1, 3, '01:47:48', 1, '', '2133', ''),
(4, 1, 4, '01:49:39', 2, '', '2106', ''),
(5, 1, 5, '01:59:52', 3, '', '2131', ''),
(6, 1, 6, '02:04:40', 4, '', '2134', ''),
(7, 1, 7, '02:15:06', 5, '', '2105', ''),
(8, 1, 8, '02:15:40', 6, '', '2104', ''),
(9, 1, 9, '02:18:36', 7, '', '2102', ''),
(10, 1, 10, '02:27:31', 8, '', '2107', ''),
(11, 1, 11, '02:34:19', 9, '', '2103', ''),
(12, 2, 12, '01:51:04', 1, '', '2033', ''),
(13, 2, 13, '02:02:17', 2, '', '2201', ''),
(14, 2, 14, '02:07:45', 3, '', '2032', ''),
(15, 2, 15, '02:14:04', NULL, '', '2202', 'в/к'),
(16, 2, 16, '02:16:29', NULL, '', '9646', 'в/к'),
(17, 2, 17, '02:22:07', 4, '', '9643', ''),
(18, 2, 18, '02:25:52', 5, '', '9598', ''),
(19, 2, 19, '02:26:22', 6, '', '2232', ''),
(20, 2, 20, '02:34:50', 7, '', '2204', ''),
(21, 2, 21, '02:44:45', 8, '', '2101', ''),
(22, 2, 22, '02:49:00', 9, '', '2031', ''),
(23, 2, 23, '02:54:58', 10, '', '2231', ''),
(24, 2, 24, '02:55:24', NULL, '', '2233', 'в/к'),
(25, 3, 25, '00:58:00', 1, '', '1366', ''),
(26, 3, 26, '00:58:50', 2, '', '1161', ''),
(27, 3, 27, '01:05:12', 3, '', '1164', ''),
(28, 3, 28, '01:07:32', 4, '', '1131', ''),
(29, 3, 29, '01:16:20', NULL, '', '1365', 'в/к'),
(30, 3, 30, '01:20:06', 5, '', '1362', ''),
(31, 3, 31, '01:21:24', 6, '', '1166', ''),
(32, 3, 32, '01:27:07', 7, '', '1132', ''),
(33, 3, 33, '01:29:30', NULL, '', '1135', 'в/к'),
(34, 3, 12, '00:44:12', 1, '', '1390', ''),
(35, 3, 34, '00:47:13', 2, '', '1101', ''),
(36, 3, 35, '00:48:57', 3, '', '9612', ''),
(37, 3, 36, '00:50:45', 4, '', '1133', ''),
(38, 3, 37, '00:52:22', 5, '', '1335', ''),
(39, 3, 38, '00:53:21', 6, '', '1102', ''),
(40, 3, 39, '00:53:23', 7, '', '1021', ''),
(41, 3, 40, '00:54:06', 8, '', '9644', ''),
(42, 3, 41, '00:54:54', 9, '', '1333', ''),
(43, 3, 42, '00:57:06', 10, '', '1363', ''),
(44, 3, 43, '00:58:17', NULL, '', '1105', 'в/к'),
(45, 3, 44, '00:58:38', NULL, '', '1364', 'в/к'),
(46, 3, 45, '00:59:08', NULL, '', '1167', 'в/к'),
(47, 3, 46, '00:59:10', 11, '', '1163', ''),
(48, 3, 47, '00:59:31', NULL, '', '1134', 'в/к'),
(49, 3, 48, '00:59:34', 12, '', '1334', ''),
(50, 3, 49, '01:01:37', 13, '', '1367', ''),
(51, 3, 50, '01:03:25', NULL, '', '1361', 'в/к'),
(52, 3, 51, '01:03:38', NULL, '', '9637', 'в/к'),
(53, 3, 52, '01:04:43', 14, '', '1104', ''),
(54, 3, 53, '01:05:17', 15, '', '1106', ''),
(55, 3, 54, '01:06:05', NULL, '', '9632', 'в/к'),
(56, 3, 55, '01:06:07', NULL, '', '9631', 'в/к'),
(57, 3, 56, '01:12:58', NULL, '', '1332', 'в/к'),
(58, 3, 57, '01:13:49', 16, '', '2329', ''),
(59, 3, 58, '01:16:11', NULL, '', '9628', 'в/к'),
(60, 3, 59, '01:20:08', 17, '', '1165', ''),
(61, 4, 60, '01:03:35', 1, '', '9636', ''),
(62, 4, 61, '01:04:23', 2, '', '1002', ''),
(63, 4, 62, '01:05:16', 3, '', '9602', ''),
(64, 4, 1, '01:22:38', 4, '', '1004', ''),
(65, 4, 63, '01:27:35', 5, '', '1007', ''),
(66, 4, 64, '01:32:39', 6, '', '1022', ''),
(67, 4, 65, '01:39:43', NULL, '', '9648', 'в/к'),
(68, 4, 66, '01:39:59', 7, '', '1013', ''),
(69, 4, 67, '01:40:12', NULL, '', '1014', 'в/к'),
(70, 4, 68, '01:40:12', NULL, '', '9647', 'в/к'),
(71, 4, 69, '01:40:13', NULL, '', '1015', 'в/к'),
(72, 4, 70, '01:40:16', 8, '', '1024', ''),
(73, 4, 71, '01:47:12', NULL, '', '1033', 'в/к'),
(74, 4, 72, '00:55:56', NULL, '', '1003', 'в/к'),
(75, 4, 73, '00:53:27', 1, '', '1025', ''),
(76, 4, 74, '01:01:19', 2, '', '1001', ''),
(77, 4, 75, '01:11:16', 3, '', '1017', ''),
(78, 4, 76, '01:11:48', 4, '', '1206', ''),
(79, 4, 77, '01:12:21', NULL, '', '1204', 'в/к'),
(80, 4, 78, '01:12:51', NULL, '', '1020', 'в/к'),
(81, 4, 79, '01:13:07', NULL, '', '1205', 'в/к'),
(82, 4, 80, '01:13:16', 5, '', '1201', ''),
(83, 4, 81, '01:14:10', NULL, '', '9650', 'в/к'),
(84, 4, 82, '01:14:19', NULL, '', '1006', 'в/к'),
(85, 4, 83, '01:14:40', 6, '', '1030', ''),
(86, 4, 84, '01:19:27', 7, '', '9649', ''),
(87, 4, 85, '01:22:20', 8, '', '9645', ''),
(88, 4, 57, '01:22:33', 9, '', '1005', ''),
(89, 4, 86, '01:25:00', NULL, '', '1027', 'в/к'),
(90, 4, 87, '01:27:35', 10, '', '1031', ''),
(91, 4, 88, '01:32:38', 11, '', '1026', ''),
(92, 4, 89, '01:34:35', NULL, '', '1028', 'в/к'),
(93, 4, 90, '01:36:33', 12, '', '1016', ''),
(94, 4, 91, '01:37:50', 13, '', '1018', ''),
(95, 4, 92, '00:55:54', 14, '', '1019', '');
SQL;
    }
}
